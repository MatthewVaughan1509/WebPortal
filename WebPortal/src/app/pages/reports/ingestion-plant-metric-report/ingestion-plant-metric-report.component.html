<div class="header">
    <div class="dx-fieldset-header">Ingestion Plant Metrics Not Processing</div>
</div>


<div id="tab-panel">
    <dx-tab-panel #tabPanel [dataSource]="tabs" [selectedIndex]="activeTab" [loop]="false" [animationEnabled]="true"
        [swipeEnabled]="true">
        <div *dxTemplate="let tab of 'title'">
            <span>{{tab.Name}}</span>
        </div>
        <div *dxTemplate="let tab of 'item'">
            <div *ngIf="tab.Id == 1" class="tab-content">
                <dx-box direction="row" width="100%">
                    <dxi-item [ratio]="1.5">
                        <div class="dx-field">
                            <div class="grid-caption">Total Number of Records = {{ingestionMetricsNotProcessing.length}}  Most Delayed Timestamp = {{mostDelayedTimeStamp | date: 'yyyy-MM-dd'}}</div>
                            <dx-data-grid [height]="gridHeight" width="100%" [dataSource]="ingestionMetricsNotProcessing"
                                [allowColumnResizing]="true" [allowColumnReordering]="true" [focusedRowEnabled]="false"
                                keyExpr="Id" [columnAutoWidth]="true" [showBorders]="true" (onExporting)="onExportingActive($event)">
                                <dxo-export  [enabled]="true"></dxo-export>
                                <dxo-group-panel [visible]="true"></dxo-group-panel>
                                <dxo-search-panel [visible]="true"></dxo-search-panel>
                                <dxo-sorting mode="multiple"></dxo-sorting>
                                <dxo-filter-panel [visible]="true"></dxo-filter-panel>
                                <dxo-export  [enabled]="true"></dxo-export>
                                <dxo-toolbar>
                                    <dxi-item name="groupPanel"></dxi-item>
                                    <dxi-item location="after">
                                        <div *dxTemplate>
                                            <dx-button icon="refresh" (onClick)="getReportData()">
                                            </dx-button>
                                        </div>
                                    </dxi-item>
                                    <dxi-item name="exportButton"></dxi-item>
                                    <dxi-item name="searchPanel"></dxi-item>
                                </dxo-toolbar>
                                <dxi-column dataField="Region"></dxi-column>
                                <dxi-column dataField="Plant"></dxi-column>
                                <dxi-column dataField="MetricGroupName"></dxi-column>
                                <dxi-column dataField="MetricName"></dxi-column>
                                <dxi-column dataField="InActive"></dxi-column>
                                <dxi-column dataField="IngestionFrequency"></dxi-column>
                                <dxi-column dataField="DataSamplingInterval"></dxi-column>
                                <dxi-column dataField="LastIngestedTimeStamp" dataType="datetime" format="yyyy-MM-dd HH:mm:ss" caption="Last Ingested Time"></dxi-column>
                                <dxi-column dataField="IngestionServiceMessage" caption="Service Message"></dxi-column>
                                <dxi-column dataField="DaysDelayed"></dxi-column>
                            </dx-data-grid>
                        </div>
                    </dxi-item>
                </dx-box>
            </div>
            <div *ngIf="tab.Id == 2" class="tab-content">
                <dx-box direction="row" width="100%">
                    <dxi-item [ratio]="1.5">
                        <div class="dx-field">
                            <div class="grid-caption">Total Number of Records = {{inActiveIngestionMetrics.length}}</div>
                            <dx-data-grid [height]="gridHeight" width="100%" [dataSource]="inActiveIngestionMetrics"
                                [allowColumnResizing]="true" [allowColumnReordering]="true" [focusedRowEnabled]="false"
                                keyExpr="Id" [columnAutoWidth]="true" [showBorders]="true" (onExporting)="onExportingInActive($event)">
                                <dxo-header-filter [visible]="true"></dxo-header-filter>
                                <dxo-group-panel [visible]="true"></dxo-group-panel>
                                <dxo-search-panel [visible]="true"></dxo-search-panel>
                                <dxo-sorting mode="multiple"></dxo-sorting>
                                <dxo-filter-panel [visible]="true"></dxo-filter-panel>
                                <dxo-export  [enabled]="true"></dxo-export>
                                <dxo-toolbar>
                                    <dxi-item name="groupPanel"></dxi-item>
                                    <dxi-item location="after">
                                        <div *dxTemplate>
                                            <dx-button icon="refresh" (onClick)="getReportData()">
                                            </dx-button>
                                        </div>
                                    </dxi-item>
                                    <dxi-item name="exportButton"></dxi-item>
                                    <dxi-item name="searchPanel"></dxi-item>
                                </dxo-toolbar>
                                <dxi-column dataField="Region"></dxi-column>
                                <dxi-column dataField="Plant"></dxi-column>
                                <dxi-column dataField="MetricGroupName"></dxi-column>
                                <dxi-column dataField="MetricName"></dxi-column>
                                <dxi-column dataField="InActive"></dxi-column>
                                <dxi-column dataField="IngestionFrequency"></dxi-column>
                                <dxi-column dataField="DataSamplingInterval"></dxi-column>
                                <dxi-column dataField="LastIngestedTimeStamp" dataType="datetime" format="yyyy-MM-dd HH:mm:ss" caption="Last Ingested Time"></dxi-column>
                            </dx-data-grid>
                        </div>
                    </dxi-item>
                </dx-box>
            </div>
        </div>
    </dx-tab-panel>

</div>